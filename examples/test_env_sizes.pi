module Basics/Prim

def P(c:chan<int>) =
  [false] tau, end +
  [true] c?(x), #core/io:print_int(x), end

def Q(c:chan<int>, x:int) =
  [#core/arith:less_than(x, 1000)] c!42, end +
  [false] tau, end

def R() = end

def S() = #core/io:print_int(42), end

def Out(c: chan<int>) = c!42, end
def Inp(c: chan<int>) = c?(x), end

def Main() =
  new(c:chan<int>),
  spawn{P(c)},
  Q(c, 42)
