module Todo

def Gen(n: int, right: chan<int>, g: chan<chan<int>>) =
  [n == 0] tau,
           #core.io:print_str("pipeline generation done\n"),
           end
+ [true  ] tau,
           #core.io:print_int(n),
           #core.io:print_str("\n"),
           new (left: chan<int>),
           Gen(n - 1, left, g)

def Main() =
  new (g: chan<chan<int>>),
  new (right: chan<int>),
  spawn { Gen(10, right, g) },
  end
