module Test/FibonacciDF

def FFib(r:chan<int>) =
  r!1, r!1, FFib'(1, 1, r)

def FFib'(n:int, m:int, r:chan<int>) = 
r!#core/arith:add(m, n), FFib'(m, #core/arith:add(n, m), r)

def Main() = 
    new(r:chan<int>), spawn{FFib(r)}, Printer(r)

def Printer(r:chan<int>) =
r?(x), #core/io:print_int(x), Printer(r)
